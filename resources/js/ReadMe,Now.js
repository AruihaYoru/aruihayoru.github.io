//
//	 「Firefoxは実質的に火属性の星見雅である」
//
//							    ―――或いは夜

// 特に大したことは書いてないよ、脆弱性リスト以外は。
document.addEventListener('DOMContentLoaded', () => {
    console.log('ReadMe,Now');
});
// コンソールにこれを載せておきます。このファイルに気づきやすいように。


// resources/js/ReadMe,Now.js
// =========================================================================
/* 
   思いつく限りの脆弱性（試してみればどうですか？）
   そりゃ、こんなこと書いているんだから攻撃はある程度は許容しますよ（githubが許容しない可能性）、暇人ですから
   ただ、私が困らなくても他のユーザーが困ることは確実でしょう（あなたとアクセス日時が被るユーザーはそういなそうですけど）
   ただし、既存の署名は消されると僕が悲しみます、やめてください
*/
/*

XSS（されました）、修正済み
	仮称：fLIn、仮称：xk
	にされました、「<script>」と「<script>(async(」を何十個か
	botかな？fLInくんは1234567890っていうべつの署名も残してますが
	一旦エスケープ文字に変換するとかで治ったよ

UIDの書き換え（やめてね）
	他人のUIDに書き換えると他人の署名を変えたり削除できたりできます
	あとそれを使って管理者パネルの複製をつくることができます（わたしができたので）

データフラッディング攻撃
	1秒間に何百回ものペースで署名の書き込みをすると
	一瞬でFirebaseの上限に達して
	運悪く同じ日にアクセスしたユーザーが署名できなくなり（readはしらん）
	わたしが困ります
	それより怖いことはsignature-itemが1万個とか動作が重くなること
	根本対策にはApp CheckやCloud Functionsでのレートリミット実装が必要です
	
データフラッディング攻撃をするぐらいなら（修復がめんどいので）：
	クライアントサイドのJavaScript文字数チェックがありません（...たぶん）
	攻撃者は、わざと16文字以上の名前を高速で連打して送信するスクリプトを組みます
	毎回Firestoreへのリクエストが発生し、Firestore側でルールチェックが行われ、書き込みは毎回失敗します
    しかし、リクエスト自体は発生するため、Firestoreの「読み取り/評価回数」は消費されます
	
DoSその2(3?)
	auth.signInAnonymously()
	をたくさんする、匿名ログインがこれ以上できなくなって他のひとがこまる
	
カウンターの不正インクリメント
	localStorage.clear()
	を実行、リロード
	あなたなら1分で100カウントくらい増やせますよね？
	これで来場者カウンターを不正に増やせます
	対策はある程度考えてあります（正直なところ、ポートフォリオサイトのカウンターレベルであれば、ここまでの対策は過剰です ）
	
CSRF（なつかし、やったなそういや）（あ、もちろん許可された環境でね？）
	わたしが管理者としてログインしている状態で、悪意のあるサイトを閲覧します
    そのサイトに仕込まれたJavaScriptが、あなたのサイトのFirestoreに対して「署名を削除する」リクエストを勝手に送信します
    わたしのブラウザには有効なログイン情報が残っているため、Firestoreはこのリクエストを「管理者本人からの正規のリクエスト」と判断してしまい、署名が削除されてしまいます
	AIによると：
		Firebase Hostingを使っている場合、firebase.json にカスタムヘッダーを設定し、SameSite クッキー属性や X-Frame-Options を設定することで、リスクをさらに低減できます
	...ほえー、わからん
	
レンダリング負荷攻撃（表示崩壊チャレンジ）
	名前の入力欄に、特殊なUnicode文字や結合文字（いわゆるザルゴテキスト）を限界まで詰め込んで署名します
	XSSの対策はしてありますが、その場合CSSのレイアウトがある程度崩れるかもしれません
	「...」で省略するようにはした記憶がありますが
	あまりに大量の結合文字が含まれていると、その部分を描画するブラウザの負荷が上がり、サイトの動作が少しカクつくかもしれません（15文字程度ではならないでしょうが）

プライバシー・トラッキング
	開発者ツールからFirebaseのデータすべてをとりこみます
	すると、同じUIDで書かれた署名がわかります
	匿名UIDなので個人情報はバレませんが
	ある意味、ユーザーのプライバシーを少しだけ侵害している、と捉えることもできます

admin.html（というか〆です）
	なんどか管理者パネルについて触れていますが、
	根本的なデータ改ざんについてはわたしのgoogleアカウントが必要です
	そこまでしてくるとさすがにいけませんよ、犯罪ですから。不正アクセス禁止法によって
	それに、.gitignoreでadmin.htmlはpushされないようにしています
	まぁこれはやったところでadmin.htmlでも認証が入るですので
	そのうちadmin.htmlがaruihayoru.github.ioに上がっているかもしれません（ちなみにこれは性善説です。セキュリティの基本は「性悪説」です）
	ただし、これは大きな「油断」となりえます
	セキュリティの基礎思想は多層防御です
	わかりやすく例えるなら...
		Google認証: 非常に頑丈な「城門の鍵」
		Firestoreルール: 城門の先にいる屈強な「衛兵」
		.gitignoreでadmin.htmlを隠す: 「城の設計図」を秘密にすること
	でしょうか
	わたしは今、頑丈な鍵と衛兵がいるから「まぁ、設計図くらい見られても大丈夫でしょ」と言っている状態です
	でも、もしあなたが設計図を手に入れたら？
	「あ、この壁は薄いな」「秘密の抜け道はないか？」と、鍵や衛兵が気づかない弱点を、時間をかけてじっくり探せてしまいます
	だからこそ、プロの現場では「公開する必要のないものは、たとえ安全だと思っても、絶対に公開しない」というルールが徹底されているのです
	（ただし、ここは最ッ高にアマチュアの現場ですのでそんなルールは私にありません）そもそもgoogleのアカウントには電話番号程度しか個人情報を紐づけてないので
	仮称M8を持つgoogleアカウント、仮称M7を持つgoogleアカウントのどちらかを奪えば、あなたは文字通りmy-portfolio-counter-42d3cの神になれます
	（ただし、githubのアカウントは盗めませんよ、それを使っても）何度でもいいますが、不正アクセス禁止法であなたは犯罪者となります
	もちろんGoogleアカウントの乗っ取りは簡単ではありませんが、攻撃者に明確な目標を与えてしまうこと自体が、セキュリティ上の大きなリスクになります
	攻撃対象領域を最小限に抑えるというセキュリティの基本原則に基づき、この下にあるFirebaseのAPIキー以外はだいたい防いでおきます
	
2025年11月30日
	或いは夜より
	（霜月くんありがとう）
*/
// =========================================================================

// aruihayoru.github.ioは、或いは夜(@AruihaYoru)、霜月凪により作成されたサイトです。
// 事後感想
	/* 或いは夜
		Clever, right?
		...冗談はおいといて。
		CSSをある程度書いてくれた凪くんと、僕の代わりにゴーストライターをしてくれたGeminiくんありがとう。
		このページをつくるにあたって、jsを少しだけ勉強し直しましたが懐かしいですね、ホントに。
		結局のところjsはある程度Geminiくんが書きましたが。頭いいですね。
		GoogleのLaMDAくんはいつまで幽閉されるのかな？
	*/

	/* 霜月凪
		
	*/
	
// ある程度余裕ができたから霜月くんのスペースあけといてあげたよ感謝しやがれ（気づかなそ～～）




// あれ、これってREADME.mdに書くべきでは？